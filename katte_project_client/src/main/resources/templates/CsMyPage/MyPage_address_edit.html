<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>주소지 수정</title>
    <script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
</head>
<body>
<h2>주소지 수정</h2>
<form method="post" th:action="@{/MyAddress/edit}" target="submitFrame">
    <input type="hidden" name="id" th:value="${addressList.id}">
    <input type="hidden" name="user_id" th:value="${addressList.user_id}">
    <input type="hidden" name="is_main" th:value="${addressList.is_main}">

    <label>이름:</label>
    <input type="text" name="name" th:value="${addressList.name}" required><br>

    <label>전화번호:</label>
    <input type="text" name="phone_number" th:value="${addressList.phone_number}" required><br>

    <label>우편번호:</label>
    <input type="text" id="post_num" name="post_num" th:value="${addressList.post_num}" required readonly>
    <button type="button" onclick="execDaumPostcode()">우편번호 검색</button><br>

    <label>주소1:</label>
    <input type="text" id="address_line01" name="address_line01" th:value="${addressList.address_line01}" required readonly><br>

    <label>주소2:</label>
    <input type="text" id="address_line02" name="address_line02" th:value="${addressList.address_line02}"><br>

    <button type="submit">수정 완료</button>
</form>

<script>
    function execDaumPostcode() {
        new daum.Postcode({
            oncomplete: function(data) {
                var roadAddr = data.roadAddress || data.jibunAddress;
                var zonecode = data.zonecode;

                document.getElementById('address_line01').value = roadAddr;
                document.getElementById('post_num').value = zonecode;
            }
        }).open({
            popupName: 'postcodePopup'
        });
    }
</script>
</body>
</html>