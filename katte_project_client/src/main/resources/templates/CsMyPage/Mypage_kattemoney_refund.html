<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="UTF-8">
  <title>Favorite</title>
  <link rel="stylesheet" href="/css/fragments/Sidebar.css" />
  <link rel="stylesheet" href="/css/CsMyPage/Mypage_kattemoney_refund.css">
</head>
<body>
<!-- ───────────────────────────────────────────────────────────────────
   1) 사이드바 (기존과 동일)
   ─────────────────────────────────────────────────────────────────── -->
<!-- 사이드바 HTML 분리 -->
<div th:replace="~{Fragments/Sidebar :: sidebar}"></div>

<div class="wrapper">
<div id = "MyPageBar"> <!--상단 마이페이지 바-->
  <div id = "MyPageText">MyPage</div>
  <div id = "ClickBox">
    <div id = "buyList">
      <a href="/MyPage">구매 내역</a>
    </div>
    <div id = "favorite">
      <a href="/Favorite">관심</a>
    </div>
    <div id = "MyStyle">
      <a href="/MyStyle">내 스타일</a>
    </div>
    <div id = "MyKatteMoney" class = "selected">
      <a href="/MyKatteMoney">캇테머니</a>
    </div>
    <div id = "MyPoint">
      <a href="/MyPoint">포인트</a>
    </div>
    <div id = "MyCoupon">
      <a href="/MyCoupon">쿠폰함</a>
    </div>
    <div id = "MyLogInfo">
      <a href="/MyLogInfo">로그인 정보</a>
    </div>
    <div id = "MyProfile">
      <a href="/MyProfile">프로필 관리</a>
    </div>
    <div id = "MyAddress">
      <a href="/MyAddress">주소록 관리</a>
    </div>
  </div>
</div>
  <!-- 충전/환불 탭 버튼 (상단 위치) -->
  <div class="katte-tab-buttons">
    <a th:class="${tab} == 'charge' ? 'selected-tab' : ''" href="/mypage/kattemoney">충전</a>
    <a th:class="${tab} == 'refund' ? 'selected-tab' : ''" href="/mypage/kattemoney/refund">환불</a>
  </div>
  <div class="refund-wrapper">
  <div class="refund-title">캇테머니 환불</div>
  <div class="refund-balance-label">보유 캇테머니</div>
    <div class="refund-balance" th:text="${#numbers.formatInteger(katteMoney, 3, 'COMMA') + 'katte'}">0 katte</div>
  <div class="refund-label">환불 신청 금액</div>
  <input class="refund-input" type="text" placeholder="katte">
  <select class="refund-bank-select">
    <option value="kb">KB국민은행</option>
    <option value="shinhan">신한은행</option>
    <option value="woori">우리은행</option>
    <option value="hana">하나은행</option>
    <option value="ibk">IBK기업은행</option>
    <option value="nh">NH농협은행</option>
    <!-- 필요시 추가 -->
  </select>
    <input class="refund-account-input" type="text" placeholder="12345678">
    <button class="refund-btn" onclick="submitRefund()">확인</button>
  </div></div></body>

<script>
  function submitRefund() {
    const amount = document.querySelector(".refund-input").value;
    const account = document.querySelector(".refund-account-input").value;
    const bank = document.querySelector(".refund-bank-select").value;

    if (!amount || !account || !bank) {
      alert("모든 항목을 입력해 주세요.");
      return;
    }

    const form = document.createElement("form");
    form.method = "POST";
    form.action = "/ecommerce/refund";

    const amountInput = document.createElement("input");
    amountInput.name = "amount";
    amountInput.value = amount;
    form.appendChild(amountInput);

    const accountInput = document.createElement("input");
    accountInput.name = "account_number";
    accountInput.value = account;
    form.appendChild(accountInput);

    const bankInput = document.createElement("input");
    bankInput.name = "bank_type";
    bankInput.value = bank;
    form.appendChild(bankInput);

    document.body.appendChild(form);
    form.submit();
  }
</script>

<script th:inline="javascript">
  const message = /*[[${message}]]*/ null;
  if (message) alert(message);
</script>
</html>